"use strict";(()=>{var m=class n{static CONTAINER_SELECTOR="[data-vimeo-container]";static IFRAME_SELECTOR="[data-vimeo-player]";static BTN_PLAY_PAUSE="[data-vimeo-play-pause-button]";static ICON_PLAY="[data-vimeo-play-icon]";static ICON_PAUSE="[data-vimeo-pause-icon]";static BTN_AUDIO="[data-vimeo-audio-button]";static ICON_AUDIO_ON="[data-vimeo-audio-on]";static ICON_AUDIO_OFF="[data-vimeo-audio-off]";constructor(){this.initializeAll()}initializeAll(){let o=document.querySelectorAll(n.CONTAINER_SELECTOR);o.length===0&&console.warn("[Vimeo] No containers found for selector",n.CONTAINER_SELECTOR),o.forEach((p,i)=>this.initContainer(p,i)),console.info("[Vimeo] All players initialized:",o.length)}initContainer(o,p=0){let i=o.querySelector(n.IFRAME_SELECTOR);if(!i){console.error("[Vimeo] iframe not found in container",o);return}let T=(i.getAttribute("allow")||"").trim(),V=["autoplay","fullscreen","picture-in-picture"],f=T.split(";").map(e=>e.trim()).filter(Boolean);V.forEach(e=>{f.some(s=>s.toLowerCase()===e)||f.push(e)}),i.setAttribute("allow",f.join("; "));let h=i.getAttribute("src")||"";if(h){let e=h;if(!/[?&]playsinline=1/.test(e)){let s=e.includes("?")?"&":"?";e=`${e}${s}playsinline=1`}if(!/[?&]muted=1/.test(e)){let s=e.includes("?")?"&":"?";e=`${e}${s}muted=1`}e!==h&&i.setAttribute("src",e)}let w=window.Vimeo;if(!w||!w.Player){console.error("[Vimeo] Vimeo API not available. Ensure script is loaded.");return}let t=new w.Player(i),E=o.querySelector(n.BTN_PLAY_PAUSE),b=o.querySelector(n.ICON_PLAY),L=o.querySelector(n.ICON_PAUSE),y=o.querySelector(n.BTN_AUDIO),I=o.querySelector(n.ICON_AUDIO_ON),O=o.querySelector(n.ICON_AUDIO_OFF),r=Number.parseFloat(o.getAttribute("data-vimeo-start")||"0")||0,A=o.getAttribute("data-vimeo-end"),S=o.getAttribute("data-vimeo-duration"),N=(()=>{if(A!==null&&A!=="")return Number.parseFloat(A);let e=S!==null?Number.parseFloat(S):3;return r+(Number.isFinite(e)?e:3)})(),g=o.getAttribute("data-vimeo-full-start"),C=g!==null?Number.parseFloat(g):0,a=!1,l=!1,u=!1;window.IS_DEBUG_MODE&&console.debug("[Vimeo] initContainer",{index:p,snippetStart:r,snippetEnd:N,fullStart:C,hasPlayPauseButton:!!E,hasAudioButton:!!y,iframeAllow:i.getAttribute("allow"),src:i.getAttribute("src")}),(i.getAttribute("allow")||"").toLowerCase().includes("autoplay")||console.warn('[Vimeo] iframe is missing `allow="autoplay"` which can prevent programmatic play. Consider adding it.');let c=()=>{b?.classList.remove("hide-this"),L?.classList.add("hide-this")},d=()=>{b?.classList.add("hide-this"),L?.classList.remove("hide-this")},v=!1;t.on("timeupdate",e=>{if(!a||l)return;let s=typeof e?.seconds=="number"?e.seconds:NaN;if(!Number.isFinite(s))return;!v&&s>=N-.05&&(v=!0,t.setCurrentTime(r).finally(()=>{v=!1}))}),t.ready().then(()=>t.setMuted(!0)).then(()=>t.setVolume(0)).then(()=>t.setCurrentTime(r)).then(()=>t.pause()).then(()=>{c(),console.info("[Vimeo] Player ready (paused at snippet start)")}).catch(e=>{console.error("[Vimeo] Error during init:",e)}),o.addEventListener("mouseenter",()=>{l||(a=!0,window.IS_DEBUG_MODE&&console.debug("[Vimeo] mouseenter -> start snippet"),t.setMuted(!0).then(()=>t.setVolume(0)).then(()=>t.setCurrentTime(r)).then(()=>t.play()).then(()=>d()).catch(e=>console.error("[Vimeo] Error playing snippet:",e)))}),o.addEventListener("mouseleave",()=>{l||a&&(window.IS_DEBUG_MODE&&console.debug("[Vimeo] mouseleave -> stop snippet"),t.pause().then(()=>t.setCurrentTime(r)).then(()=>c()).finally(()=>{a=!1}).catch(e=>console.error("[Vimeo] Error stopping snippet:",e)))}),o.addEventListener("click",()=>{l=!0,window.IS_DEBUG_MODE&&console.debug("[Vimeo] click -> full mode start"),t.setMuted(!1).then(()=>t.setVolume(1)).then(()=>(u=!0,t.getPaused())).then(e=>{if(e)return t.setCurrentTime(C)}).then(()=>t.play()).then(()=>d()).catch(e=>console.error("[Vimeo] Error starting full playback:",e))}),E&&E.addEventListener("click",()=>{t.getPaused().then(e=>{e?t.play().then(d):t.pause().then(c)})}),y&&y.addEventListener("click",()=>{let e=!u;t.setVolume(e?1:0).then(()=>{u=e,u?(O?.classList.add("hide-this"),I?.classList.remove("hide-this")):(I?.classList.add("hide-this"),O?.classList.remove("hide-this"))}).catch(s=>console.error("[Vimeo] Error toggling audio:",s))}),t.on("play",()=>d()),t.on("pause",()=>c())}};console.info("[Vimeo] script loaded");typeof window.loadScript=="function"?window.loadScript("https://player.vimeo.com/api/player.js",{name:"vimeo"}):console.warn("[Vimeo] window.loadScript is not defined. Include dist/prod/entry.js first.");window.Webflow=window.Webflow||[];window.Webflow.push(()=>{!!window.Vimeo?.Player?new m:document.addEventListener("scriptLoaded:vimeo",()=>{new m},{once:!0})});})();
