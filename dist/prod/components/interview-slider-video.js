"use strict";(()=>{var o=class{VIDEO_WRAP_SELECTOR="[data-interview-video-el]";VIDEO_URL_ATTR="data-video-url";CLASS_HOVER_PLAYING="is-hover-playing";CLASS_CLICK_PLAYING="is-click-playing";CLASS_CLICK_PAUSED="is-click-paused";observer;videoInstances=new Map;currentlyPlaying=null;constructor(){this.observer=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&this.initializeVideo(t.target)})},{rootMargin:"500px",threshold:0}),this.initializeAll()}initializeAll(){let e=document.querySelectorAll(this.VIDEO_WRAP_SELECTOR);if(e.length===0){console.debug("[InterviewVideo] No video wraps found");return}e.forEach(t=>{this.observer.observe(t)}),window.IS_DEBUG_MODE&&console.debug("[InterviewVideo] Observing",e.length,"video wraps")}async initializeVideo(e){if(this.observer.unobserve(e),this.videoInstances.has(e))return;let t=e.getAttribute(this.VIDEO_URL_ATTR);if(!t){console.error("[InterviewVideo] No video URL found on wrap",e);return}let n=window.Vimeo;if(!n||!n.Player){console.error("[InterviewVideo] Vimeo API not available");return}try{let i=new n.Player(e,{url:t,background:!0,muted:!0,autoplay:!1,loop:!0});await i.ready(),await i.pause(),this.videoInstances.set(e,i);let s=!1,a=async()=>{s&&(s=!1,this.currentlyPlaying=null,e.classList.remove(this.CLASS_CLICK_PLAYING),e.classList.add(this.CLASS_CLICK_PAUSED),await i.pause())};this.videoInstances.set(e,{player:i,pauseVideo:a}),e.addEventListener("mouseenter",async()=>{if(!s){e.classList.remove(this.CLASS_CLICK_PAUSED),e.classList.add(this.CLASS_HOVER_PLAYING);try{await i.setMuted(!0),await i.play()}catch(r){console.error("[InterviewVideo] Error playing on hover:",r),e.classList.remove(this.CLASS_HOVER_PLAYING)}}}),e.addEventListener("mouseleave",async()=>{if(!s){e.classList.remove(this.CLASS_HOVER_PLAYING);try{await i.pause()}catch(r){console.error("[InterviewVideo] Error pausing on hover leave:",r)}}}),e.addEventListener("click",async()=>{if(s)await a();else{if(this.currentlyPlaying&&this.currentlyPlaying!==e){let r=this.videoInstances.get(this.currentlyPlaying);r?.pauseVideo&&await r.pauseVideo()}s=!0,this.currentlyPlaying=e,e.classList.remove(this.CLASS_HOVER_PLAYING),e.classList.remove(this.CLASS_CLICK_PAUSED),e.classList.add(this.CLASS_CLICK_PLAYING);try{await i.setMuted(!1),await i.setVolume(1),await i.play()}catch(r){console.error("[InterviewVideo] Error playing on click:",r),s=!1,this.currentlyPlaying=null,e.classList.remove(this.CLASS_CLICK_PLAYING)}}}),i.on("ended",()=>{s=!1,this.currentlyPlaying===e&&(this.currentlyPlaying=null),e.classList.remove(this.CLASS_CLICK_PLAYING),e.classList.remove(this.CLASS_CLICK_PAUSED)}),window.IS_DEBUG_MODE&&console.debug("[InterviewVideo] Player initialized for",t)}catch(i){console.error("[InterviewVideo] Error initializing video:",i)}}destroy(){this.observer.disconnect(),this.videoInstances.forEach(e=>{try{e.destroy()}catch(t){console.error("[InterviewVideo] Error destroying player:",t)}}),this.videoInstances.clear()}};window.loadScript("https://player.vimeo.com/api/player.js",{name:"vimeo-sdk"});window.Webflow=window.Webflow||[];window.Webflow.push(()=>{!!window.Vimeo?.Player?new o:document.addEventListener("scriptLoaded:vimeo-sdk",()=>{new o},{once:!0})});})();
